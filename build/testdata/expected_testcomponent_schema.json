{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "title": "TestReceiverConfig Configuration",
  "properties": {
    "database": {
      "type": "object",
      "properties": {
        "host": {
          "type": "string"
        },
        "port": {
          "type": "integer"
        },
        "database": {
          "type": "string"
        },
        "username": {
          "type": "string"
        },
        "password": {
          "type": "string"
        },
        "timeout": {
          "type": "string",
          "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
          "description": "Duration string (e.g., '1s', '5m', '1h')"
        },
        "max_connections": {
          "type": "integer"
        },
        "enable_ssl": {
          "type": "boolean"
        },
        "ssl_mode": {
          "type": "string"
        },
        "connection_params": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        }
      },
      "required": [
        "host",
        "port",
        "database",
        "username",
        "password",
        "timeout",
        "max_connections",
        "enable_ssl"
      ]
    },
    "http_server": {
      "type": "object",
      "properties": {
        "auth": {
          "properties": {
            "authenticator": {
              "type": "object"
            },
            "request_params": {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          },
          "type": "object"
        },
        "compression_algorithms": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "cors": {
          "properties": {
            "allowed_headers": {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "allowed_origins": {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "max_age": {
              "type": "integer"
            }
          },
          "type": "object"
        },
        "endpoint": {
          "type": "string"
        },
        "idle_timeout": {
          "type": "string",
          "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
          "description": "Duration string (e.g., '1s', '5m', '1h')"
        },
        "include_metadata": {
          "type": "boolean"
        },
        "keep_alives_enabled": {
          "type": "boolean"
        },
        "max_request_body_size": {
          "type": "integer"
        },
        "middlewares": {
          "items": {
            "properties": {
              "id": {
                "type": "object"
              }
            },
            "type": "object"
          },
          "type": "array"
        },
        "read_header_timeout": {
          "type": "string",
          "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
          "description": "Duration string (e.g., '1s', '5m', '1h')"
        },
        "read_timeout": {
          "type": "string",
          "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
          "description": "Duration string (e.g., '1s', '5m', '1h')"
        },
        "response_headers": {
          "additionalProperties": {
            "type": "string"
          },
          "type": "object"
        },
        "tls": {
          "properties": {
            "ca_file": {
              "type": "string"
            },
            "ca_pem": {
              "type": "string"
            },
            "cert_file": {
              "type": "string"
            },
            "cert_pem": {
              "type": "string"
            },
            "cipher_suites": {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "client_ca_file": {
              "type": "string"
            },
            "client_ca_file_reload": {
              "type": "boolean"
            },
            "curve_preferences": {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "include_system_ca_certs_pool": {
              "type": "boolean"
            },
            "key_file": {
              "type": "string"
            },
            "key_pem": {
              "type": "string"
            },
            "max_version": {
              "type": "string"
            },
            "min_version": {
              "type": "string"
            },
            "reload_interval": {
              "type": "string",
              "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
              "description": "Duration string (e.g., '1s', '5m', '1h')"
            },
            "tpm": {
              "properties": {
                "auth": {
                  "type": "string"
                },
                "enabled": {
                  "type": "boolean"
                },
                "owner_auth": {
                  "type": "string"
                },
                "path": {
                  "type": "string"
                }
              },
              "required": [
                "enabled",
                "path",
                "owner_auth",
                "auth"
              ],
              "type": "object"
            }
          },
          "type": "object"
        },
        "write_timeout": {
          "type": "string",
          "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
          "description": "Duration string (e.g., '1s', '5m', '1h')"
        }
      },
      "required": [
        "response_headers",
        "read_header_timeout",
        "write_timeout",
        "idle_timeout"
      ]
    },
    "grpc_server": {
      "type": "object",
      "properties": {
        "auth": {
          "properties": {
            "authenticator": {
              "type": "object"
            }
          },
          "type": "object"
        },
        "include_metadata": {
          "type": "boolean"
        },
        "keepalive": {
          "properties": {
            "enforcement_policy": {
              "properties": {
                "min_time": {
                  "type": "string",
                  "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
                  "description": "Duration string (e.g., '1s', '5m', '1h')"
                },
                "permit_without_stream": {
                  "type": "boolean"
                }
              },
              "type": "object"
            },
            "server_parameters": {
              "properties": {
                "max_connection_age": {
                  "type": "string",
                  "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
                  "description": "Duration string (e.g., '1s', '5m', '1h')"
                },
                "max_connection_age_grace": {
                  "type": "string",
                  "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
                  "description": "Duration string (e.g., '1s', '5m', '1h')"
                },
                "max_connection_idle": {
                  "type": "string",
                  "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
                  "description": "Duration string (e.g., '1s', '5m', '1h')"
                },
                "time": {
                  "type": "string",
                  "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
                  "description": "Duration string (e.g., '1s', '5m', '1h')"
                },
                "timeout": {
                  "type": "string",
                  "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
                  "description": "Duration string (e.g., '1s', '5m', '1h')"
                }
              },
              "type": "object"
            }
          },
          "type": "object"
        },
        "max_concurrent_streams": {
          "type": "integer"
        },
        "max_recv_msg_size_mib": {
          "type": "integer"
        },
        "middlewares": {
          "items": {
            "properties": {
              "id": {
                "type": "object"
              }
            },
            "type": "object"
          },
          "type": "array"
        },
        "netaddr": {
          "properties": {
            "dialer": {
              "properties": {
                "timeout": {
                  "type": "string",
                  "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
                  "description": "Duration string (e.g., '1s', '5m', '1h')"
                }
              },
              "type": "object"
            },
            "endpoint": {
              "type": "string"
            },
            "transport": {
              "type": "string"
            }
          },
          "type": "object"
        },
        "read_buffer_size": {
          "type": "integer"
        },
        "tls": {
          "properties": {
            "ca_file": {
              "type": "string"
            },
            "ca_pem": {
              "type": "string"
            },
            "cert_file": {
              "type": "string"
            },
            "cert_pem": {
              "type": "string"
            },
            "cipher_suites": {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "client_ca_file": {
              "type": "string"
            },
            "client_ca_file_reload": {
              "type": "boolean"
            },
            "curve_preferences": {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "include_system_ca_certs_pool": {
              "type": "boolean"
            },
            "key_file": {
              "type": "string"
            },
            "key_pem": {
              "type": "string"
            },
            "max_version": {
              "type": "string"
            },
            "min_version": {
              "type": "string"
            },
            "reload_interval": {
              "type": "string",
              "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
              "description": "Duration string (e.g., '1s', '5m', '1h')"
            },
            "tpm": {
              "properties": {
                "auth": {
                  "type": "string"
                },
                "enabled": {
                  "type": "boolean"
                },
                "owner_auth": {
                  "type": "string"
                },
                "path": {
                  "type": "string"
                }
              },
              "required": [
                "enabled",
                "path",
                "owner_auth",
                "auth"
              ],
              "type": "object"
            }
          },
          "type": "object"
        },
        "write_buffer_size": {
          "type": "integer"
        }
      },
      "required": [
        "netaddr"
      ]
    },
    "tls": {
      "type": "object",
      "properties": {
        "ca_file": {
          "type": "string"
        },
        "ca_pem": {
          "type": "string"
        },
        "cert_file": {
          "type": "string"
        },
        "cert_pem": {
          "type": "string"
        },
        "cipher_suites": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "client_ca_file": {
          "type": "string"
        },
        "client_ca_file_reload": {
          "type": "boolean"
        },
        "curve_preferences": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "include_system_ca_certs_pool": {
          "type": "boolean"
        },
        "key_file": {
          "type": "string"
        },
        "key_pem": {
          "type": "string"
        },
        "max_version": {
          "type": "string"
        },
        "min_version": {
          "type": "string"
        },
        "reload_interval": {
          "type": "string",
          "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
          "description": "Duration string (e.g., '1s', '5m', '1h')"
        },
        "tpm": {
          "properties": {
            "auth": {
              "type": "string"
            },
            "enabled": {
              "type": "boolean"
            },
            "owner_auth": {
              "type": "string"
            },
            "path": {
              "type": "string"
            }
          },
          "required": [
            "enabled",
            "path",
            "owner_auth",
            "auth"
          ],
          "type": "object"
        }
      }
    },
    "retry": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "max_attempts": {
          "type": "integer"
        },
        "initial_delay": {
          "type": "string",
          "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
          "description": "Duration string (e.g., '1s', '5m', '1h')"
        },
        "max_delay": {
          "type": "string",
          "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
          "description": "Duration string (e.g., '1s', '5m', '1h')"
        },
        "multiplier": {
          "type": "number"
        },
        "jitter": {
          "type": "boolean"
        }
      },
      "required": [
        "enabled",
        "max_attempts",
        "initial_delay",
        "max_delay",
        "multiplier"
      ]
    },
    "metrics": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "collection_interval": {
          "type": "string",
          "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
          "description": "Duration string (e.g., '1s', '5m', '1h')"
        },
        "metric_names": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "labels": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "custom_queries": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "query": {
                "type": "string"
              },
              "parameters": {
                "type": "object",
                "additionalProperties": true
              },
              "timeout": {
                "type": "string",
                "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
                "description": "Duration string (e.g., '1s', '5m', '1h')"
              },
              "metric_type": {
                "type": "string"
              }
            },
            "required": [
              "name",
              "query",
              "metric_type"
            ]
          }
        }
      },
      "required": [
        "enabled",
        "collection_interval",
        "metric_names"
      ]
    },
    "collection_interval": {
      "type": "string",
      "pattern": "^[0-9]+(ns|us|µs|ms|s|m|h)$",
      "description": "Duration string (e.g., '1s', '5m', '1h')"
    },
    "batch_size": {
      "type": "integer"
    },
    "enable_tracing": {
      "type": "boolean"
    },
    "log_level": {
      "type": "string"
    },
    "include_tables": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "exclude_tables": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "table_aliases": {
      "type": "object",
      "additionalProperties": {
        "type": "string"
      }
    },
    "custom_attributes": {
      "type": "object",
      "additionalProperties": true
    }
  },
  "required": [
    "database",
    "retry",
    "metrics",
    "collection_interval",
    "batch_size",
    "enable_tracing"
  ]
}